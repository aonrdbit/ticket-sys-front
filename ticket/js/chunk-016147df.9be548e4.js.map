{"version":3,"sources":["webpack:///./src/views/Login.vue?8d37","webpack:///./src/views/Login.vue?7405","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?31f5","webpack:///./src/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","loginForm","rules","model","value","callback","$$v","$set","expression","on","submitForm","staticRenderFns","component"],"mappings":"yIAAA,yBAAoe,EAAG,G,yCCAve,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAUA,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,KAAK,CAACE,YAAY,cAAc,CAACN,EAAIO,GAAG,mBAAmBH,EAAG,MAAM,CAACA,EAAG,UAAU,CAACI,IAAI,WAAWF,YAAY,gBAAgBG,MAAM,CAAC,MAAQT,EAAIU,UAAU,MAAQV,EAAIW,MAAM,cAAc,KAAK,CAACP,EAAG,eAAe,CAACK,MAAM,CAAC,KAAO,aAAa,CAACL,EAAG,WAAW,CAACK,MAAM,CAAC,aAAe,MAAM,YAAc,MAAM,cAAc,sBAAsBG,MAAM,CAACC,MAAOb,EAAIU,UAAkB,SAAEI,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIU,UAAW,WAAYK,IAAME,WAAW,yBAAyB,GAAGb,EAAG,eAAe,CAACK,MAAM,CAAC,KAAO,aAAa,CAACL,EAAG,WAAW,CAACK,MAAM,CAAC,KAAO,WAAW,aAAe,MAAM,YAAc,QAAQ,cAAc,gBAAgBG,MAAM,CAACC,MAAOb,EAAIU,UAAkB,SAAEI,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIU,UAAW,WAAYK,IAAME,WAAW,yBAAyB,GAAGb,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,YAAY,YAAYG,MAAM,CAAC,KAAO,WAAWS,GAAG,CAAC,MAAQlB,EAAImB,aAAa,CAACnB,EAAIO,GAAG,SAAS,IAAI,IAAI,MAAM,IAC/jCa,EAAkB,G,oCCqCtB,GACI,KAAJ,QACI,WAAJ,gBACI,OACI,MAAR,CACY,UAAZ,CACgB,SAAhB,GACgB,SAAhB,IAEY,UAAZ,GACY,MAAZ,CACgB,SAAhB,CACoB,CAApB,8CAEgB,SAAhB,CACoB,CAApB,gDAKI,QAAJ,IACA,gCACQ,aACI,IAAZ,OACY,KAAZ,QACgB,OAAhB,OACgB,IAAhB,8BACgB,KAAhB,CACoB,SAApB,qBACoB,SAApB,wBAEA,kBACgB,QAAhB,YACA,qBACoB,EAApB,uBAEoB,EAApB,4FAEoB,QAApB,6BACA,wGACwB,EAAxB,sCAEA,+BAC4B,EAA5B,uBAE4B,EAA5B,kBAGoB,EAApB,kBAEoB,EAApB,wBAEA,mBACgB,QAAhB,aACgB,EAAhB,yBAGQ,aACI,KAAZ,6BChG8L,I,wBCQ1LC,EAAY,eACd,EACAtB,EACAqB,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-016147df.9be548e4.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=f3a921da&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=f3a921da&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Header'),_c('div',{staticClass:\"signin-form\"},[_c('h3',{staticClass:\"sign-title\"},[_vm._v(\"ticket-sys 登录\")]),_c('div',[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"status-icon\":\"\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"placeholder\":\"用户名\",\"prefix-icon\":\"el-icon-user-solid\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"请输入密码\",\"prefix-icon\":\"el-icon-lock\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"登录\")])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n                <Header></Header>\n        <div class=\"signin-form\">\n            <h3 class=\"sign-title\">ticket-sys 登录</h3>\n            <div>\n                <el-form :model=\"loginForm\" :rules=\"rules\" status-icon ref=\"ruleForm\" class=\"demo-ruleForm\">\n                    <el-form-item prop=\"username\">\n                        <el-input\n                                v-model=\"loginForm.username\"\n                                autocomplete=\"off\"\n                                placeholder=\"用户名\"\n                                prefix-icon=\"el-icon-user-solid\"\n                        ></el-input>\n                    </el-form-item>\n                    <el-form-item prop=\"password\">\n                        <el-input\n                                type=\"password\"\n                                v-model=\"loginForm.password\"\n                                autocomplete=\"off\"\n                                placeholder=\"请输入密码\"\n                                prefix-icon=\"el-icon-lock\"\n                        ></el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"submitForm\" class=\"login-btn\">登录</el-button>\n<!--                        <el-button type=\"info\" @click=\"goRegister\" class=\"login-btn\">注册</el-button>-->\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import api from '../constant/api';\n    import {mapMutations} from \"vuex\";\n    import Header from \"../components/Header\";\n\n    export default {\n        name: 'login',\n        components: {Header},\n        data() {\n            return {\n                loginForm: {\n                    username: '',\n                    password: ''\n                },\n                userToken: '',\n                rules: {\n                    username: [\n                        {required: true, message: '请输入用户名', trigger: 'blur'},\n                    ],\n                    password: [\n                        {required: true, message: '请输入密码', trigger: 'blur'},\n                    ]\n                }\n            }\n        },\n        methods: {\n            ...mapMutations(['changeLogin']),\n            submitForm() {\n                let v = this;\n                this.$axios({\n                    method: 'post',\n                    url: api.base_url + '/user/login',\n                    data: {\n                        'username': v.loginForm.username,\n                        'password': v.loginForm.password\n                    }\n                }).then(function (res) {\n                    console.log(res.data);\n                    if(res.data.msg===\"true\"){\n                        v.userToken = res.data.token;\n                        // 将用户token保存到vuex中\n                        v.changeLogin({Authorization: v.userToken, username: v.loginForm.username,userId:res.data.userId});\n                        //判断是否有redirect参数\n                        console.log(v.$route.query.redirect)\n                        if(v.$route.query.redirect!==null && v.$route.query.redirect!==undefined && v.$route.query.redirect!==\"/register\"){\n                            v.$router.push(v.$route.query.redirect);\n                        }else{\n                            if(v.loginForm.username==='admin'){\n                                v.$router.push(\"/admin\");\n                            }else{\n                                v.$router.push('/');\n                            }\n                        }\n                        v.$message('登录成功');\n                    }else{\n                        v.$message('密码或用户名错误');\n                    }\n                }).catch(function (err) {\n                    console.log(\"err\", err);\n                    v.$message('密码或用户名错误');\n                })\n            },\n            goRegister(){\n                this.$router.push(\"/register\")\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .login-btn {\n        width: 100%;\n    }\n\n    .signin-form {\n        width: 360px;\n        margin: 100px auto;\n        background-color: #fff;\n        padding: 10px 20px;\n    }\n\n    .sign-title {\n        text-align: center;\n        margin-bottom: 25px;\n    }\n\n    .second-operate {\n        margin-top: -20px;\n    }\n\n    .retrieve-password {\n        margin-left: 25px;\n    }\n\n    .register {\n        margin-left: 10px;\n    }\n\n    .quict-sign {\n        float: right;\n        margin-right: 5px;\n    }\n\n    .third-party-sign-text {\n        text-align: center;\n        margin-top: -20px;\n        margin-bottom: 20px;\n    }\n\n    .third-party-sign {\n        width: fit-content;\n        margin: auto;\n    }\n\n    .third-party-sign a {\n        margin-right: 30px;\n    }\n\n    .qq-login {\n        width: 25px;\n        height: 25px;\n        vertical-align: middle;\n    }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=f3a921da&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=f3a921da&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f3a921da\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}