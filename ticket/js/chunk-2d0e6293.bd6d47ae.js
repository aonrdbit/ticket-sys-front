(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6293"],{9820:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticStyle:{"text-align":"center"}},[l("Header"),l("div",{staticStyle:{height:"50px"}}),l("div",[l("el-form",{ref:"form",attrs:{inline:!0}},[l("el-form-item",[l("el-button",{attrs:{icon:"el-icon-sort"},on:{click:t.onSwap}})],1),l("el-form-item",{attrs:{label:"出发地"}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择出发地"},model:{value:t.st,callback:function(e){t.st=e},expression:"st"}},t._l(t.stations,(function(t){return l("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})})),1)],1),l("el-form-item",{attrs:{label:"到达地"}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择到达地"},model:{value:t.ed,callback:function(e){t.ed=e},expression:"ed"}},t._l(t.stations,(function(t){return l("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})})),1)],1),l("el-form-item",{attrs:{label:"出发时间"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择出发日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1)],1),l("div",{staticStyle:{height:"15px"}}),l("div",{staticStyle:{margin:"0 auto",width:"1140px"}},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list}},[l("el-table-column",{attrs:{prop:"trNo",label:"车次",width:"70"}}),l("el-table-column",{attrs:{prop:"st",label:"出发地",width:"80"}}),l("el-table-column",{attrs:{prop:"ed",label:"到达地",width:"80"}}),l("el-table-column",{attrs:{prop:"st_time",label:"出发时间",width:"100"}}),l("el-table-column",{attrs:{prop:"ed_time",label:"到达时间",width:"100"}}),l("el-table-column",{attrs:{prop:"dur",label:"历时",width:"140"}}),l("el-table-column",{attrs:{prop:"fir",label:"一等座",width:"70"}}),l("el-table-column",{attrs:{prop:"firPrice",label:"一等座价格(元)",width:"120"}}),l("el-table-column",{attrs:{prop:"sec",label:"二等座",width:"70"}}),l("el-table-column",{attrs:{prop:"secPrice",label:"二等座价格(元)",width:"120"}}),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return t.handleClick(e.row)}}},[t._v("预定")])]}}])})],1)],1)],1)},i=[],s=l("0418"),r=l("b1ce"),o={name:"SearchResult",components:{Header:s["a"]},data(){return{loading:!0,st:"",ed:"",value:"",date:"",stations:[],list:[]}},methods:{onSwap(){let t=this.st;this.st=this.ed,this.ed=t},onSubmit(){""!==this.st&&" "!==this.ed&&""!==this.date.toString()?(this.$router.push({path:"/list",query:{st:this.st,ed:this.ed,date:this.date.toString()}}),this.getList()):this.$message("请输入正确信息")},handleClick(t){console.log(t);let e=localStorage.getItem("Authorization");null===e?this.$router.replace({name:"login",query:{redirect:this.$router.currentRoute.fullPath}}):(t.date=this.date.toString(),this.$router.push({path:"/order",query:t}))},getList(){this.st=this.$route.query.st,this.ed=this.$route.query.ed,this.date=this.$route.query.date;let t=this;this.$axios({method:"post",url:r["a"].base_url+"/train/query",data:{st:t.st,ed:t.ed,date:t.date}}).then((function(e){console.log(e.data),"true"===e.data.msg?(t.list=e.data.list,t.loading=!1):t.$message("网络或内部错误")}))},getStations(){let t=this;this.$axios({method:"get",url:r["a"].base_url+"/train/station/all"}).then((function(e){console.log("res",e),"true"===e.data.msg?t.stations=e.data.list:t.$message("网络或内部错误")})).catch((function(t){console.log("err",t)}))}},created(){this.getStations(),this.getList()},mounted(){this.getStations(),this.getList()}},n=o,d=l("2877"),u=Object(d["a"])(n,a,i,!1,null,"79d1a378",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0e6293.bd6d47ae.js.map